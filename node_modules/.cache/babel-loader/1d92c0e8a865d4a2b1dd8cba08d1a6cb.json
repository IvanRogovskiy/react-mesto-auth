{"ast":null,"code":"var _jsxFileName = \"/Users/ivanrogovskiy/Documents/tries/yandex/mesto-react/src/components/App.js\",\n    _s = $RefreshSig$();\n\nimport '../App.css';\nimport React from \"react\";\nimport '../index.css';\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport ImagePopup from \"./ImagePopup\";\nimport api from '../utils/Api';\nimport { CurrentUserContext } from '../contexts/currentUserContext';\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({\n    isOpened: false,\n    name: \"\",\n    link: \"\"\n  });\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  };\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  };\n\n  const closeAllPopups = () => {\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setSelectedCard({ ...selectedCard,\n      isOpened: false\n    });\n  };\n\n  const handleCardClick = card => {\n    setSelectedCard({\n      isOpened: true,\n      name: card.name,\n      link: card.link\n    });\n  };\n\n  const handleUpdateUser = _ref => {\n    let {\n      name,\n      about\n    } = _ref;\n    api.updateUserInfo({\n      name,\n      about\n    }).then(data => setCurrentUser({\n      currentUser,\n      ...data\n    })).catch(err => console.log(err));\n    closeAllPopups();\n  };\n\n  const handleUpdateAvatar = link => {\n    api.updateUserAvatar(link).then(data => setCurrentUser({\n      currentUser,\n      ...data\n    })).catch(err => console.log(err));\n    closeAllPopups();\n  };\n\n  const handlePlaceAdd = _ref2 => {\n    let {\n      name,\n      link\n    } = _ref2;\n    api.addNewCard(name, link).then(newCard => setCards({\n      cards,\n      ...newCard\n    })).catch(err => console.log(err));\n    closeAllPopups();\n  };\n\n  const handleCardLike = card => {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some(i => i._id === currentUser._id); // Отправляем запрос в API и получаем обновлённые данные карточки\n\n    if (!isLiked) {\n      api.addLike(card._id).then(newCard => {\n        setCards(state => state.map(c => c._id === card._id ? newCard : c));\n      });\n    }\n\n    api.removeLike(card._id).then(newCard => {\n      setCards(state => state.map(c => c._id === card._id ? newCard : c));\n    });\n  };\n\n  const handleCardDelete = card => {\n    api.deleteCard(card._id).then(() => {\n      setCards(state => state.filter(c => c._id !== card._id));\n    });\n  };\n\n  React.useEffect(() => {\n    api.getMyProfileInfo().then(userData => {\n      console.log(userData);\n      setCurrentUser(userData);\n    }).catch(err => console.log(err));\n  }, []);\n  React.useEffect(() => {\n    api.getUsersCards().then(userCards => {\n      setCards(userCards);\n    }).catch(err => console.log(err));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n    value: currentUser,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'page-container',\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Main, {\n        onEditProfile: handleEditProfileClick,\n        onEditAvatar: handleEditAvatarClick,\n        onAddPlace: handleAddPlaceClick,\n        onCardClick: handleCardClick,\n        cards: cards,\n        onCardLike: handleCardLike,\n        onCardDelete: handleCardDelete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(AddPlacePopup, {\n        isOpened: isAddPlacePopupOpen,\n        onClose: closeAllPopups,\n        onAddPlace: handlePlaceAdd\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(EditProfilePopup, {\n        isOpened: isEditProfilePopupOpen,\n        onClose: closeAllPopups,\n        onUserUpdate: handleUpdateUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(EditAvatarPopup, {\n        isOpened: isEditAvatarPopupOpen,\n        onClose: closeAllPopups,\n        onAvatarUpdate: handleUpdateAvatar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(ImagePopup, {\n        selectedCard: selectedCard,\n        onClose: closeAllPopups\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"t5IMH7pq+GnpusMDhVzv96atqVo=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/ivanrogovskiy/Documents/tries/yandex/mesto-react/src/components/App.js"],"names":["React","Header","Main","Footer","ImagePopup","api","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","App","currentUser","setCurrentUser","useState","cards","setCards","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","isOpened","name","link","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","closeAllPopups","handleCardClick","card","handleUpdateUser","about","updateUserInfo","then","data","catch","err","console","log","handleUpdateAvatar","updateUserAvatar","handlePlaceAdd","addNewCard","newCard","handleCardLike","isLiked","likes","some","i","_id","addLike","state","map","c","removeLike","handleCardDelete","deleteCard","filter","useEffect","getMyProfileInfo","userData","getUsersCards","userCards"],"mappings":"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","sourcesContent":["import '../App.css';\nimport React from \"react\";\nimport '../index.css'\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport ImagePopup from \"./ImagePopup\";\nimport api from '../utils/Api';\nimport { CurrentUserContext } from '../contexts/currentUserContext';\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\n\nconst App = () => {\n\n    const [currentUser, setCurrentUser] = React.useState({});\n    const [cards, setCards] = React.useState([]);\n\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n    const [selectedCard, setSelectedCard] = React.useState({\n        isOpened: false,\n        name: \"\",\n        link: \"\"\n    });\n\n    const handleEditAvatarClick = () => {\n        setIsEditAvatarPopupOpen(true);\n    }\n\n    const handleEditProfileClick = () => {\n        setIsEditProfilePopupOpen(true);\n    }\n\n    const handleAddPlaceClick = () => {\n        setIsAddPlacePopupOpen(true);\n    }\n    \n    const closeAllPopups = () => {\n        setIsAddPlacePopupOpen(false);\n        setIsEditAvatarPopupOpen(false);\n        setIsEditProfilePopupOpen(false);\n        setSelectedCard({...selectedCard, isOpened: false})\n    }\n\n    const handleCardClick = (card) => {\n        setSelectedCard({\n            isOpened: true,\n            name: card.name ,\n            link: card.link,\n        })\n    }\n    \n    const handleUpdateUser = ({name, about}) => {\n      api.updateUserInfo({name, about})\n          .then(data => setCurrentUser({currentUser, ...data}))\n          .catch(err => console.log(err))\n      closeAllPopups();\n    }\n\n    const handleUpdateAvatar = (link) => {\n        api.updateUserAvatar(link)\n            .then(data => setCurrentUser({currentUser, ...data}))\n            .catch(err => console.log(err))\n        closeAllPopups();\n    }\n\n    const handlePlaceAdd = ({name, link}) => {\n        api.addNewCard(name, link)\n            .then(newCard => setCards({cards, ...newCard}))\n            .catch(err => console.log(err))\n        closeAllPopups();\n    }\n\n    const handleCardLike = (card) => {\n        // Снова проверяем, есть ли уже лайк на этой карточке\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n        // Отправляем запрос в API и получаем обновлённые данные карточки\n        if (!isLiked) {\n            api.addLike(card._id).then((newCard) => {\n                setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n            });\n        }\n        api.removeLike(card._id).then((newCard) => {\n            setCards((state) => state.map((c) => c._id === card._id ? newCard : c))\n        })\n    }\n\n    const handleCardDelete = (card) => {\n        api.deleteCard(card._id).then(() => {\n            setCards((state) => state.filter((c) => c._id !== card._id))\n        })\n    }\n\n    React.useEffect(() => {\n        api.getMyProfileInfo()\n            .then((userData) => {\n                console.log(userData);\n                setCurrentUser(userData)\n            })\n            .catch(err => console.log(err))\n    }, [])\n\n    React.useEffect(() => {\n        api.getUsersCards()\n            .then((userCards) => {\n                setCards(userCards)\n            })\n            .catch(err => console.log(err))\n    }, [])\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n        <div className={'page-container'}>\n            <Header/>\n            <Main\n                onEditProfile={handleEditProfileClick}\n                onEditAvatar={handleEditAvatarClick}\n                onAddPlace={handleAddPlaceClick}\n                onCardClick={handleCardClick}\n                cards = {cards}\n                onCardLike={handleCardLike}\n                onCardDelete={handleCardDelete}\n            />\n            <Footer/>\n            <AddPlacePopup\n                isOpened={isAddPlacePopupOpen}\n                onClose={closeAllPopups}\n                onAddPlace={handlePlaceAdd}\n            />\n            <EditProfilePopup\n                isOpened={isEditProfilePopupOpen}\n                onClose={closeAllPopups}\n                onUserUpdate={handleUpdateUser}\n            />\n            <EditAvatarPopup\n                isOpened={isEditAvatarPopupOpen}\n                onClose={closeAllPopups}\n                onAvatarUpdate={handleUpdateAvatar}\n            />\n            <ImagePopup selectedCard={selectedCard} onClose={closeAllPopups}/>\n        </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}